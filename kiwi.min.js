(function(){function a(b){var c=a.resolve(b),d=a.modules[c];if(!d)throw new Error('failed to require "'+b+'"');return d.exports||(d.exports={},d.call(d.exports,d,d.exports,a.relative(c))),d.exports}a.modules={},a.resolve=function(b){var c=b,d=b+".js",e=b+"/index.js";return a.modules[d]&&d||a.modules[e]&&e||c},a.register=function(b,c){a.modules[b]=c},a.relative=function(b){return function(c){if("."!=c.charAt(0))return a(c);var d=b.split("/"),e=c.split("/");d.pop();for(var f=0;f<e.length;f++){var g=e[f];".."==g?d.pop():"."!=g&&d.push(g)}return a(d.join("/"))}},a.register("cache.js",function(a,b,c){function d(){this._cache={}}d.prototype.cache=function(a,b){if(_.isUndefined(b))return;this._cache[a]=b},d.prototype.get=function(a){return this._cache[a]},a.exports=b=d}),a.register("compiler.js",function(a,b,c){var d=c("./token"),e=c("./utils"),f="{{",g="}}",h=f.length,i=/^(\/)?\s*([^\s\}\(]*)/i,j=a.exports=function(a){this.template=a,this.source=a.template,this.options=a.options,this.__compilationEnd=[]};j.prototype.compile=function(a){function c(c,d){if(c)return a(c);b._tokenize(d,f)}function f(c,d){if(c)return a(c);d.compile(b,g)}function g(b,c){if(b)return a(b);a(null,new Function("__template","__tools","_","__data","__helpers","__callback",c))}var b=this;e.applyAll(this.source,d.tagBeforeProcessors,[this],c)},j.prototype._tokenize=function(a,b){var c=a,e=new d.RootToken,i=e,j=!1,k;for(;;){var l=c.indexOf(j?g:f);if(l==-1){this._pushLiteralToken(i,e,c);break}j&&(l+=h),k=c.slice(0,l),c=c.slice(l);if(!j)this._pushLiteralToken(i,e,k);else{k=k.slice(2,-2).trim();try{e=this._pushToken(i,e,k)}catch(m){return b(m)}}j=!j}if(i!==e)return b(new Error("Tokenization error: unexpected end of file, expedted `"+e.tag.tagName+"`."));b(null,i)},j.prototype._pushLiteralToken=function(a,b,c){if(!c.length)return;b.children.push(new d.LiteralToken(c,a))},j.prototype._pushToken=function(a,b,c){var e=c.match(i),f=e[2],g=e[1]!=="/",h=b.lookupTag(f);if(!h)throw new Error("Tokenization error: Unknown tag `"+f+"`.");if(h.isIntermediate){b.tagType.isIntermediate&&(b=b.parent);var j=new d.IntermediateToken(c,h,a,b,[],this.options);return b.intermediate.push(j),j}if(h.isBlock){if(g){var j=new d.BlockToken(c,h,a,b,[],this.options);return b.children.push(j),j}if(!b.parent)throw new Error("Tokenization error: unexpected `"+f+"` tag at root level.");b.tagType.isIntermediate&&(b=b.parent);if(b.tagType.tagName!==f)throw new Error("Tokenization error: unexpected `"+f+"` tag, expected `"+b.tag.tagName+"`.");return b.parent}if(!g)throw new Error("Tokenization error: `"+f+"` is not a block tag.");var j=new d.LeafToken(c,h,a,b,this.options);return b.children.push(j),b}}),a.register("filter.js",function(a,b,c){function d(b,c){var d;c.forEach(function(c){var e=[];_.isArray(c)&&(e=c.slice(1),c=c[0]);var f=a.exports.filters[c];if(!f)return d=c,!1;b=f.apply(this,[b].concat(e))});if(d)throw new Error("Rendering error: Unknown filter `"+d+"`.");return b}function f(a){a=a||frame.files.requireDir(__dirname+"/filters/");for(file in a){var b=a[file];for(d in b)e[d]=b[d]}}a.exports=d;var e=a.exports.filters={};if(typeof window!="undefined"){var g=["base","datetime"],h={};_.each(g,function(a){h[a]=c("./filters/"+a)}),f(h)}}),a.register("filters/base.js",function(a,b,c){var d=c("../tools"),e=c("../utils");a.exports.escape=function(b){if(b===null||b===undefined)return"";if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.escape(b)}),c}return d.escape(b)},a.exports.escapeIfUnsafe=function(b){if(b===null||b===undefined)return"";if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.escapeIfUnsafe(b)}),c}return d.escapeIfUnsafe(b)},a.exports.capitalize=function(b){if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.capitalize(b)}),c}return b=b.toString(),b.charAt(0).toUpperCase()+b.slice(1)},a.exports.upper=function(b){if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.upper(b)}),c}return b.toString().toUpperCase()},a.exports.lower=function(b){if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.lower(b)}),c}return b.toString().toLowerCase()},a.exports.json=function(a){return JSON.stringify(a)},a.exports.add=function(b,c){if(typeof b=="object"){var d={};return _.each(b,function(b,e){d[e]=a.exports.add(b,c)}),d}return parseFloat(b)+parseFloat(c)},a.exports.subtract=function(b,c){return a.exports.add(b,-parseInt(c))},a.exports.mul=function(b,c){if(typeof b=="object"){var d={};return _.each(b,function(b,e){d[e]=a.exports.mul(b,c)}),d}return parseFloat(b)*parseFloat(c)},a.exports.div=function(b,c){if(typeof b=="object"){var d={};return _.each(b,function(b,e){d[e]=a.exports.div(b,c)}),d}return parseFloat(b)/parseFloat(c)},a.exports.incr=function(b,c){return a.exports.add(b,1)},a.exports.decr=function(b,c){return a.exports.add(b,-1)},a.exports.round=function(b){if(typeof b=="object"){var c={};return _.each(b,function(b,d){c[d]=a.exports.round(b,operand)}),c}return Math.round(b)},a.exports.floor=function(b){if(typeof b=="object"){var c={};return _.each(b,function(b,d){c[d]=a.exports.floor(b,operand)}),c}return Math.floor(b)},a.exports.ceil=function(b){if(typeof b=="object"){var c={};return _.each(b,function(b,d){c[d]=a.exports.ceil(b,operand)}),c}return Math.ceil(b)},a.exports.cut=function(b,c){if(typeof b=="object"){var d={};return _.each(b,function(b,e){d[e]=a.exports.cut(b,c)}),d}return b.toString().replace(c,"")},a.exports.addslashes=function(b){if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.capitalize(b)}),c}return b.toString().replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"').replace(/\0/g,"\\0")},a.exports.stripslashes=function(b){if(e.isIterable(b)){var c={};return _.each(b,function(b,d){c[d]=a.exports.capitalize(b)}),c}return b.toString().replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\0/g,"\0").replace(/\\\\/g,"\\")},a.exports.first=function(a){return typeof a=="object"&&!_.isArray(a)?"":_.isString(a)?a.substr(0,1):_.first(a)},a.exports.last=function(a){return typeof a=="object"&&!_.isArray(a)?"":_.isString(a)?a.slice(-1):_.last(a)},a.exports.length=function(a){return typeof a=="object"?_.keys(a).length:a.length},a.exports.reverse=function(a){return _.isArray(a)?a.reverse():a},a.exports.join=function(a,b){if(_.isArray(a))return a.join(b);if(typeof a=="object"){var c=[];return _.each(a,function(a,b){c.push(a)}),c.join(b)}return a},a.exports.urlencode=function(a){return encodeURIComponent(a)},a.exports.urldecode=function(a){return decodeURIComponent(a)},a.exports.replace=function(a,b,c,d){return a.replace(new RegExp(b,d),c)}}),a.register("filters/datetime.js",function(a,b,c){a.exports.timeago=function(a){return moment(a).fromNow()},a.exports.relativedate=function(a){return moment(a).calendar()},a.exports.date=function(a,b){return moment(a).format(b)}}),a.register("kiwi.js",function(a,b,c){var d=a.exports.Template=c("./template");a.exports.tools=c("./tools"),a.exports.version="0.1.2"}),a.register("tags/block.js",function(a,b,c){var d=/^block\s+([^\s]+)$/;a.exports.tags={};var e=a.exports.tags.block={};e.isBlock=!0,e.compile=function(a,b,c,e,f){var g=a.tag.match(d);if(!g)return f(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var h=g[1],i='(function(parentAcc) {var __acc = [];if(_.isUndefined(__blocks["'+h+'"])) {'+b+"} else {"+'__acc.push(__blocks["'+h+'"])'+"}"+'var __joined = __acc.join("");'+"parentAcc.push(__joined);"+'__blocks["'+h+'"] = __joined;'+"})(__acc);";f(null,i)}}),a.register("tags/comment.js",function(a,b,c){var d=/\{\{\s*comment\s*\}\}((.|\n)*?)\{\{\s*\/\s*comment\s*\}\}/g;a.exports.tags={};var e=a.exports.tags["#"]={};e.isBlock=!1,e.compile=function(a,b,c,d){d(null,"")},e.beforeProcessor=function(a,b,c){a=a.replace(d,""),c(null,a)}}),a.register("tags/each.js",function(a,b,c){var d=/^each(?:\(([^\)\s]+)\s*\,\s*([^\)\s]+)\s*\))?\s+(.*)$/;a.exports.tags={};var e=a.exports.tags.each={},f=e.intermediateTags={},g=f.empty={};e.isBlock=!0,e.headDeclarations="var _eachLoop;",e.compile=function(a,b,c,e,f){var g=a.tag.match(d);if(!g)return f(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var h=g[1]||"$value",i=g[2]||"$index",j=g[3],k;if(c.length){if(c.length>1)return f(new Error("Compilation Error: Too many intermediate tags for `each`."));if(a.intermediate[0].tag!=="empty")return f(new Error("Compilation Error: Unexpected tag `"+a.intermediate[0].tag+"`."));k=c[0]}var l="(function(__parentEachLoop) {";a.options.strict?l+="__tmp = "+j+";":l+="try {__tmp = "+j+"} catch(__err) {"+"if(__err instanceof ReferenceError) {"+"__tmp = [];"+"} else {"+"throw __err;"+"}"+"}",l+="var __eachLoopLength = _.size(__tmp);",k&&(l+="if(__eachLoopLength) {"),a.options.eachCounters?l+="var __eachLoopCounter = 0;_.each(__tmp, function("+h+","+i+"){"+"_eachLoop = {"+"size: __eachLoopLength,"+"counter0: __eachLoopCounter,"+"counter: __eachLoopCounter + 1,"+"revcounter0: __eachLoopLength - __eachLoopCounter - 1,"+"revcounter: __eachLoopLength - __eachLoopCounter,"+"first: __eachLoopCounter === 0,"+"last: __eachLoopCounter + 1 === __eachLoopLength,"+"parentLoop: __parentEachLoop"+"};"+b+"__eachLoopCounter++;"+"});":l+="_.each(__tmp, function("+h+","+i+"){"+b+"});",k&&(l+="} else {"+k+"}"),l+="})(_eachLoop);",f(null,l)}}),a.register("tags/extend.js",function(a,b,c){var d=c("../utils"),e=/^extend\s+(.+)$/;a.exports.tags={};var f=a.exports.tags.extend={},g=a.exports.helpers={};f.isBlock=!1,f.compile=function(a,b,c,d){if(a.root.children[0]!==a)return d(new Error("Compilation error: Extend tag must be defined at the very beginning of the template."));var f=a.tag.match(e);if(!f)return d(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var g=f[1],h="var __originalCallback = __callback;__callback = function(err, compiled) {__helpers.extend("+g+", __compiled, __template,"+"__data, __originalCallback);"+"};";d(null,h)},g.extend=function(a,b,c,d,e){function f(a,b){if(a)return e(a);e(null,b)}c._renderRelative(a,d,b,f)}}),a.register("tags/if.js",function(a,b,c){function i(a,b){var c;return b?c="if("+a+")":c="try {__tmp = "+a+"} catch(__err) {"+"if(__err instanceof ReferenceError) {"+"__tmp = false;"+"} else {"+"throw __err;"+"}"+"}"+"if(__tmp)",c}var d=/^if\s+(.*)$/,e=/^else(?:\s+(.*))?$/;a.exports.tags={};var f=a.exports.tags["if"]={},g=f.intermediateTags={},h=g["else"]={};f.isBlock=!0,f.compile=function(a,b,c,f,g){var h=a.tag.match(d);if(!h)return g(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var j=h[1],k=["}"],l=i(j,a.options.strict);l+="{"+b;var m;_.each(a.intermediate,function(b,d){var f=b.tag,g=c[d],h=f.match(e);if(!h){m=new Error("Compilation error: Unable to parse tag `"+a.tag+"`.");return}var j=h[1];j?(k.push("}"),l+="} else {"+i(j,a.options.strict)+"{"):l+="} else {",l+=c[d]});if(m)return g(m);l+=k.join(""),g(null,l)}}),a.register("tags/include.js",function(a,b,c){var d=c("../utils"),e=/^include\s+(.+)$/;a.exports.tags={};var f=a.exports.tags.include={},g=a.exports.helpers={};f.isBlock=!1,f.compile=function(a,b,c,d){var f=a.tag.match(e);if(!f)return d(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var g=f[1];c.__compilationEnd.unshift("});");var h="__helpers.include("+g+", __template,"+"__data, function(err, rendered) {"+"__acc.push(rendered);";d(null,h)},g.include=function(a,b,c,d){function e(a,b){if(a)return d(a);d(null,b)}b._renderRelative(a,c,null,e)}}),a.register("tags/print.js",function(a,b,c){function n(a){return function(b,c,d,e){var g=b.tag.match(f);if(!g)return e(new Error("Compilation error: Unable to parse tag `"+b.tag+"`."));var h=g[1],i=g[2]?o(g[2],a):a,h="__tools.filter("+h+", "+"["+i.join(",")+"]"+")",j;b.options.strict?j="__acc.push("+h+");":j="try {var __tmp = "+h+";"+"} catch(__err) {"+"if(__err instanceof ReferenceError) {"+'__tmp = "";'+"} else {"+"throw __err;"+"}"+"}"+"__acc.push(__tmp);",e(null,j)}}function o(a,b){var c=!1;return a=a.split(g).filter(function(b){return b=="raw"?(c=!0,!1):!0}).map(function(b){b=b.match(i),b[1]=b[1].replace('"','"');if(!b[2])return'"'+b[1]+'"';var c=b[2].split(h);return'["'+b[1]+'", '+c.join(",")+"]"}),c||(a=a.concat(b)),_.uniq(a)}var d=c("../filter"),e=/\$\{([^\}]*)\}/g,f=/^(?:=|html)\s+([^|]+)(?:\|(.*))?$/,g=/\|(?=(?:[^'"]|'[^']*'|"[^"]*")*$)/g,h=/\,(?=(?:[^'"]|'[^']*'|"[^"]*")*$)/g,i=/^([a-z]+)\s*(?:\((.*)\))?$/i,j=["escapeIfUnsafe"].map(JSON.stringify),k=[];a.exports.tags={};var l=a.exports.tags["="]={},m=a.exports.tags.html={};l.isBlock=!1,m.isBlock=!1,l.beforeProcessor=function(a,b,c){a=a.replace(e,"{{= $1}}"),c(null,a)},l.compile=n(j),m.compile=n(k)}),a.register("tags/raw.js",function(a,b,c){var d=c("../utils"),e=/\{\{\s*verbatim\s*\}\}((?:.|\n)*?)\{\{\s*\/\s*verbatim\s*\}\}|{\{\s*raw\s*\}\}((?:.|\n)*?)\{\{\s*\/\s*raw\s*\}\}/g;a.exports.tags={};var f=a.exports.tags.verbatim={};f.isBlock=!1,f.compile=function(a,b,c,e){var f=parseInt(a.tag.split(" ")[1]);e(null,'__acc.push("'+d.escapeCompiledString(c.__verbatim[f-1])+'");')},f.beforeProcessorPrepend=!0,f.beforeProcessor=function(a,b,c){b.__verbatim=[],a=a.replace(e,function(c,d,e){return b.__verbatim.push(d||e),"{{verbatim "+b.__verbatim.length+"}}"}),c(null,a)}}),a.register("tags/tmpl.js",function(a,b,c){var d=c("../utils"),e=/^tmpl\s+(.*)$/;a.exports.tags={};var f=a.exports.tags.tmpl={};f.isBlock=!1,f.compile=function(a,b,c,d){var f=a.tag.match(e);if(!f)return d(new Error("Compilation error: Unable to parse tag `"+a.tag+"`."));var g=f[1];c.__compilationEnd.unshift("});"),d(null,"__template._nest("+g+", __data, "+"function(err, rendered){"+"__acc.push(rendered);")}}),a.register("template.js",function(a,b,c){function l(a,b){_.isObject(a)&&!b&&(b=a,a=null),b||(b={}),_.isBoolean(b.cache)||(b&&b.settings?b.cache=b.settings.env!=="development":b.cache=!0),b=_.defaults(b,j),b.cacheContext=b.cacheContext||l,this.template=a,this.options=b,this._compiled=null;if(b.cache&&!(this._getCache()instanceof b.cacheHandler)){var c=[b.cacheHandler].concat(b.cacheOptions);b.cacheContext[b._cacheProp]=typeof window!="undefined"?new b.cacheHandler:construct.apply(this,c)}}var d=CappedCache=c("./cache"),e=c("./utils"),f=c("./token"),g=c("./tools"),h=c("./compiler"),i=c("./filter"),j={lookup:e.lookupTemplate,load:e.loadTemplate,path:null,cache:null,cacheHandler:d,cacheOptions:[],cacheTmplHandler:CappedCache,cacheTmplOptions:[1e3],useIsolatedTmplCache:!0,cacheContext:null,strict:!0,eachCounters:!0,_parent:null,_cacheAttachment:"_cache",_cacheTmplAttachment:"_nestCache"},k={filter:i,utils:e,tools:g};l.prototype._getCache=function(){return this.options.cacheContext[this.options._cacheProp]},l.prototype.loadFile=function(a,b){typeof window!="undefined"&&b(new Error("Client mode does not support reading from file."))},l.prototype.render=function(a,b){_.isFunction(a)&&!b&&(b=a,a={});var c="template::"+this._cacheKey();!this.compiled&&this.options.cache&&(this.compiled=this._getCache().get(c));if(this._compiled)return this._renderCompiled(a,b);var d=this;this._compile(function(c){if(c)return b(c);d._renderCompiled(a,b)})},l.prototype._renderCompiled=function(b,c){this._compiled(this,k,_,b,f.helpers,c)},l.prototype._compile=function(a){var b=this;if(!_.isString(this.template))return a(new Error("Template contents not set"));(new h(this)).compile(function(c,d){if(c)return a(c);b._compiled=d;var e="template::"+b._cacheKey();b.options.cache&&b._getCache().cache(e,d),a(null,d)})},l.prototype._nest=function(a,b,c){var d=_.clone(this.options);d.useIsolatedTmplCache&&(d._cacheAttachment=d._cacheTmplAttachment,d.cacheHandler=d.cacheTmplHandler,d.cacheOptions=d.cacheTmplOptions),(new l(a,d)).render(b,function(b,d){if(b)return c(b);c(null,d)})},l.prototype._renderRelative=function(a,b,c,d){function j(a,b){if(a)return d(a);e.options.cache&&e._getCache().cache(h,b),g.loadFile(b,k)}function k(a,c){if(a)return d(a);g.render(b,m)}function m(a,b){if(a)return d(a);d(null,b)}var e=this,f=_.clone(this.options);f._parent=c;var g=new l(f),h="path::"+this._cacheKey()+"::"+a,i;this.options.cache&&(i=this._getCache().get(h)),i?g.loadFile(i,k):this.options.lookup(a,this,j)},l.prototype._cacheKey=function(){return this.options.path||this.template||null},a.exports=l}),a.register("token.js",function(a,b,c){function g(a,b,c){this.parent=b,this.children=[],this.tag=null,this.tagType=null,this.options=c,this.root=a}function h(a,b,c,d){h._superclass.call(this,b,c,d),this.literal=a}function i(a,b){i._superclass.call(this,this,null,b),a||(a=[]),this.head=[],this.children=a}function j(a,b,c,d,e,f){j._superclass.call(this,c,d,f),this.tag=a,this.tagType=b,e||(e=[]),this.children=e,this.intermediate=[]}function k(a,b,c,d,e){k._superclass.call(this,c,d,e),this.tag=a,this.tagType=b}function l(a,b,c,d,e,f){l._superclass.call(this,a,b,c,d,e,f)}function r(a){a=a||d.files.requireDir(__dirname+"/tags/");for(file in a){var b=a[file].tags,c=a[file].helpers;for(tag in b){var e=b[tag];e.beforeProcessor&&(e.beforeProcessorPrepend?p.unshift(e.beforeProcessor):p.push(e.beforeProcessor)),e.headDeclarations&&m.push(e.headDeclarations),e.footDeclarations&&n.push(e.footDeclarations),o[tag]=e,e.tagName=tag}c&&_.extend(q,c)}}var d,e=c("./utils"),f=d?d.classes.extend:e.extend;g.prototype.compile=function(a,b){b(new Error("Stub method BaseToken#compile must be overloaded"))},g.prototype.lookupTag=function(a){if(o[a])return o[a];if(this.tagType&&this.tagType.intermediateTags&&this.tagType.intermediateTags[a])return this.tagType.intermediateTags[a].isIntermediate=!0,this.tagType.intermediateTags[a]},f(h,g),h.prototype.compile=function(a,b){this._compiled='__acc.push("'+e.escapeCompiledString(this.literal)+'");',b(null,this._compiled)},f(i,g),i.prototype.compile=function(a,b){function d(d,e){if(d)return b(d);var e="var __acc = [];var __blocks = {};if(__template.options && __template.options._parent) {__blocks = __template.options._parent.blocks;}var __tmp;var __err;__data = __data || {};"+m.join("")+"with(__data) {"+e+n.join("")+'var __compiled = new String(__acc.join(""));'+"__compiled.blocks = __blocks;"+"__callback(null, __compiled);"+a.__compilationEnd.join("")+"}";c._compiled=e,b(null,e)}var c=this;e.compileTokens(this.children,a,d)},f(j,g),j.prototype.compile=function(a,b){function g(f,g){if(f)return b(f);d=g,e.compileTokenArray(c.intermediate,a,h)}function h(e,g){if(e)return b(e);f=g,c.tagType.compile(c,d,f,a,i)}function i(a,d){if(a)return b(a);c._compiled=d,b(null,d)}var c=this,d,f;e.compileTokens(this.children,a,g)},f(k,g),k.prototype.compile=function(a,b){function d(a,d){if(a)return b(a);c._compiled=d,b(null,d)}var c=this,e=this.tagType.compile(this,null,a,d)},f(l,j),l.prototype.compile=function(a,b){function d(a,c){if(a)return b(a);b(null,c)}var c=this;e.compileTokens(this.children,a,d)},l.prototype.lookupTag=function(a){return this.parent.lookupTag(a)},a.exports={headDeclarations:[],BaseToken:g,RootToken:i,BlockToken:j,IntermediateToken:l,LeafToken:k,LiteralToken:h};var m=a.exports.headDeclarations=[],n=a.exports.footDeclarations=[],o=a.exports.tags={},p=a.exports.tagBeforeProcessors=[],q=a.exports.helpers={};if(typeof window!="undefined"){var s=["block","comment","each","if","print","raw","tmpl"],t={};_.each(s,function(a){t[a]=c("./tags/"+a)}),r(t)}}),a.register("tools.js",function(a,b,c){var d=c("./token"),e=c("./filter"),f=/\s+(?=(?:[^'"]|'[^']*'|"[^"]*")*$)/g;a.exports.createSimpleTag=function(b,c){d.helpers[b]=c,d.tags[b]={compile:function(a,c,d,e){var g=a.tag.split(f);g[0]="__data";var h=g.join(","),i='__acc.push(__tools.tools.escapeIfUnsafe(__helpers["'+b+'"]('+h+")"+"));";e(null,i)}}},a.exports.createFilter=function(b,c){e.filters[b]=c};var g=a.exports.escape=function(a){return a.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#146;")};a.exports.safe=function(a){return a instanceof String||(a=new String(a)),a.safe=!0,a},a.exports.escapeIfUnsafe=function(a){return a.safe?a:g(a)}}),a.register("utils.js",function(a,b,c){function f(a,b,c,d){function e(b){if(b)return d(b);a.length>0?setTimeout(f,0):d()}function f(){var d=a.shift();b.apply(this,[d].concat(c).concat([e]))}typeof c=="function"&&!d&&(d=c,c=null),c||(c=[]),a=a.slice(0),a.length>0?setTimeout(f,0):d()}function i(a,b,c){function f(a,c){a.compile(b,function(b,e){if(b)return c(b);d.push(e),c(null,e)}),e++}function h(a){if(a)return c(a);c(null,d)}var d=[],e=0;g(a,f,h)}var d,e=".kiwi",g=d?d.asyncForEach:f,h=a.exports.apply=function(a,b,c,d){function e(a,b){if(a)return d(a);d(null,b)}typeof c=="function"&&!d&&(d=c,c=null),b.apply(this,[a].concat(c||[]).concat([e]))};a.exports.applyAll=function(a,b,c,d){function e(b,d){h(a,b,c||[],function(c,e){if(c)return d(c);a=e,d()})}function f(b){if(b)return d(b);d(null,a)}typeof c=="function"&&!d&&(d=c,c=null),g(b,e,f)},a.exports.compileTokenArray=i,a.exports.compileTokens=function(a,b,c){i(a,b,function(a,b){if(a)return c(a);c(null,b.join(""))})},a.exports.escapeCompiledString=function(a){return a.replace(/([\\"])/g,"\\$1").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")},a.exports.isIterable=function(a){return typeof a=="object"&&!(a instanceof String)},a.exports.extend=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a._superclass=b,a._superproto=b.prototype}}),window.kiwi=a("kiwi")})();